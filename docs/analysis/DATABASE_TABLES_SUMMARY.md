# –ö—Ä–∞—Ç–∫–∏–π –æ–±–∑–æ—Ä —Ç–∞–±–ª–∏—Ü PostgreSQL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö DocStructureSchema

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã —Å–∏—Å—Ç–µ–º—ã

### üë• **–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ä–æ–ª–µ–π**

| –¢–∞–±–ª–∏—Ü–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è |
|---------|------------|---------------|
| `equsers` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã | `login`, `email`, `department`, `accessgranted` |
| `eqgroups` | –ì—Ä—É–ø–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | `groupname`, `description`, `ownerid` |
| `eqroles` | –†–æ–ª–∏ —Å–∏—Å—Ç–µ–º—ã | `rolename`, `description`, `ownerid` |
| `eq_departments` | –û—Ç–¥–µ–ª—ã –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ | `departmentname`, `parentid`, `description` |

### üìÑ **–î–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç**

| –¢–∞–±–ª–∏—Ü–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è |
|---------|------------|---------------|
| `eqdoctypes` | –¢–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ | `doctype`, `category`, `tablename`, `docurl` |
| `eqdocstructure` | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–ª–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ | `doctypeid`, `fieldname`, `fieldtype`, `required` |
| `eqview` | –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö | `viewname`, `parentid`, `access`, `conditions` |
| `eqviewfields` | –ü–æ–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π | `viewid`, `fieldname`, `fieldtype`, `sortorder` |

### üíº **–ë–∏–∑–Ω–µ—Å-–¥–∞–Ω–Ω—ã–µ**

| –¢–∞–±–ª–∏—Ü–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è |
|---------|------------|---------------|
| `tbl_business_unit` | –ü—Ä–æ—Ñ–∏–ª–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ | `business_unit_name`, `inn`, `kpp`, `ogrn` |
| `tbl_principal_assignment` | –ü–æ—Ä—É—á–µ–Ω–∏—è –ø—Ä–∏–Ω—Ü–∏–ø–∞–ª–∞ | `assignment_number`, `assignment_date`, `amount` |
| `tbl_incoming_payments` | –í—Ö–æ–¥—è—â–∏–µ –ø–ª–∞—Ç–µ–∂–∏ | `payment_number`, `payment_date`, `amount` |

### üè¶ **–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏**

| –¢–∞–±–ª–∏—Ü–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è |
|---------|------------|---------------|
| `tbl_currencies` | –í–∞–ª—é—Ç—ã | `currency_code`, `currency_name`, `is_active` |
| `tbl_countries` | –°—Ç—Ä–∞–Ω—ã | `country_code`, `country_name`, `is_active` |
| `tbl_swift` | SWIFT –∫–æ–¥—ã –±–∞–Ω–∫–æ–≤ | `swift_code`, `bank_name`, `country_id` |
| `tbl_bik` | –ë–ò–ö –∫–æ–¥—ã –±–∞–Ω–∫–æ–≤ | `bik_code`, `bank_name`, `city` |

## üîó **–û—Å–Ω–æ–≤–Ω—ã–µ —Å–≤—è–∑–∏**

### **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ ‚Üí –û—Ç–¥–µ–ª—ã**
```
equsers.department ‚Üí eq_departments.id
```

### **–î–æ–∫—É–º–µ–Ω—Ç—ã ‚Üí –¢–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**
```
eqdocstructure.doctypeid ‚Üí eqdoctypes.id
```

### **–ë–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã**
```
tbl_principal_assignment.business_unit_id ‚Üí tbl_business_unit.id
tbl_incoming_payments.business_unit_id ‚Üí tbl_business_unit.id
tbl_incoming_payments.assignment_id ‚Üí tbl_principal_assignment.id
```

## üìä **–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è NL‚ÜíSQL**

### **–ü—Ä–æ—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã:**
- "–ü–æ–∫–∞–∂–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π" ‚Üí `SELECT * FROM equsers`
- "–°–ø–∏—Å–æ–∫ –æ—Ç–¥–µ–ª–æ–≤" ‚Üí `SELECT * FROM eq_departments`
- "–í—Å–µ –∫–ª–∏–µ–Ω—Ç—ã" ‚Üí `SELECT * FROM tbl_business_unit`
- "–í–∞–ª—é—Ç—ã" ‚Üí `SELECT * FROM tbl_currencies`

### **–°–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:**
- "–ü–æ—Ä—É—á–µ–Ω–∏—è –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü" ‚Üí 
  ```sql
  SELECT pa.*, bu.business_unit_name 
  FROM tbl_principal_assignment pa
  JOIN tbl_business_unit bu ON pa.business_unit_id = bu.id
  WHERE pa.assignment_date >= CURRENT_DATE - INTERVAL '1 month'
  ```

- "–°—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π –ø–æ –∫–ª–∏–µ–Ω—Ç–∞–º" ‚Üí
  ```sql
  SELECT bu.business_unit_name, SUM(ip.amount) as total_amount
  FROM tbl_incoming_payments ip
  JOIN tbl_business_unit bu ON ip.business_unit_id = bu.id
  GROUP BY bu.id, bu.business_unit_name
  ```

## üéØ **–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–ª—è NL‚ÜíSQL**

### **1. –†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –æ—Ç–¥–µ–ª–∞–º
- –†–æ–ª–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º
- –ò–µ—Ä–∞—Ä—Ö–∏—è –æ—Ç–¥–µ–ª–æ–≤

### **2. –î–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç**
- –ì–∏–±–∫–∏–µ —Ç–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–ª–µ–π
- –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

### **3. –ë–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Ä—É—á–µ–Ω–∏–π
- –£—á–µ—Ç –ø–ª–∞—Ç–µ–∂–µ–π

### **4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- Row Level Security (RLS)
- –†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å
- –ê—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π

## üöÄ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è NL‚ÜíSQL —Å–∏—Å—Ç–µ–º—ã**

### **1. –ö–∞—Ç–∞–ª–æ–≥ —Å—Ö–µ–º**
- –û–ø–∏—Å–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- –°–∏–Ω–æ–Ω–∏–º—ã –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π
- –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### **2. –†–æ–ª–µ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**
- –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏
- RLS –ø–æ–ª–∏—Ç–∏–∫–∏
- –ò–µ—Ä–∞—Ä—Ö–∏—è –æ—Ç–¥–µ–ª–æ–≤

### **3. –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏**
- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã
- –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ø—Ä–∞–≤–∏–ª–∞

### **4. –í–∞–ª–∏–¥–∞—Ü–∏—è**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è SQL
- –ó–∞—â–∏—Ç–∞ –æ—Ç –∏–Ω—ä–µ–∫—Ü–∏–π
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

