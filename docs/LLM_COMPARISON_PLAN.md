# –ü–ª–∞–Ω —Å—Ä–∞–≤–Ω–µ–Ω–∏—è LLM –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–ª–∞–Ω–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤

## üéØ –¶–µ–ª—å

–°—Ä–∞–≤–Ω–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–∑–Ω—ã—Ö LLM –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–ª–∞–Ω–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤ (JSON/XML) –≤–º–µ—Å—Ç–æ SQL.

## üî¨ –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### LLM –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **Llama 3.1 (–ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ Ollama)**:
   - –ú–æ–¥–µ–ª—å: `llama3.1:8b` –∏–ª–∏ `llama3.1:70b`
   - –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞: –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞, –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å
   - –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏: –ú–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω–µ–µ —Ç–æ—á–Ω–æ–π

2. **OpenAI GPT-4o (—á–µ—Ä–µ–∑ ProxyAPI)**:
   - –ú–æ–¥–µ–ª—å: `gpt-4o`
   - –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞: –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å, —Ö–æ—Ä–æ—à–µ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
   - –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ API

3. **OpenAI GPT-3.5-turbo (—á–µ—Ä–µ–∑ ProxyAPI)**:
   - –ú–æ–¥–µ–ª—å: `gpt-3.5-turbo`
   - –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞: –ë—ã—Å—Ç—Ä–µ–µ –∏ –¥–µ—à–µ–≤–ª–µ GPT-4o
   - –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏: –ú–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω–µ–µ —Ç–æ—á–Ω–æ–π

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

### 1. **–¢–æ—á–Ω–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–ª–∞–Ω–æ–≤**:
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã JSON
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–æ–ª–µ–π (tables, fields, conditions, joins)
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ

### 2. **–°–∫–æ—Ä–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**:
- –í—Ä–µ–º—è –æ—Ç –∑–∞–ø—Ä–æ—Å–∞ –¥–æ –æ—Ç–≤–µ—Ç–∞
- –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å (–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É)

### 3. **–ö–∞—á–µ—Å—Ç–≤–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è**:
- –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ—Å—Ç–µ–π
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –æ—Å–≤–µ–¥–æ–º–ª–µ–Ω–Ω–æ—Å—Ç—å

### 4. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**:
- –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## üß™ –ü–ª–∞–Ω —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
1. **–°–æ–∑–¥–∞—Ç—å –Ω–∞–±–æ—Ä –∏–∑ 50 —Ç–µ—Å—Ç–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤**:
   - –ü—Ä–æ—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã (10): "–ü–æ–∫–∞–∂–∏ –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤"
   - –°—Ä–µ–¥–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (25): "–ö–ª–∏–µ–Ω—Ç—ã —Å –ø–æ—Ä—É—á–µ–Ω–∏—è–º–∏ –∑–∞ –º–µ—Å—è—Ü"
   - –°–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (15): "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –æ—Ç–¥–µ–ª–∞–º —Å –∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π"

2. **–°–æ–∑–¥–∞—Ç—å —ç—Ç–∞–ª–æ–Ω–Ω—ã–µ –ø–ª–∞–Ω—ã** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞

3. **–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç**:
   - –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
   - –û–ø–∏—Å–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏ –ø–æ–ª–µ–π
   - –ü—Ä–∏–º–µ—Ä—ã —Å–≤—è–∑–µ–π

### –≠—Ç–∞–ø 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ LLM

#### Llama 3.1 + Ollama:
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Ollama
curl -fsSL https://ollama.ai/install.sh | sh

# –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏
ollama pull llama3.1:8b
ollama pull llama3.1:70b

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
ollama serve
```

#### OpenAI —á–µ—Ä–µ–∑ ProxyAPI:
```python
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞
from openai import OpenAI

client = OpenAI(
    api_key="your-api-key",
    base_url="https://your-proxy-api.com/v1"
)
```

### –≠—Ç–∞–ø 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –î–ª—è –∫–∞–∂–¥–æ–π LLM:
1. **–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç** (—Å—Ö–µ–º–∞ –ë–î, –ø—Ä–∏–º–µ—Ä—ã)
2. **–ü–æ–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã** –ø–æ –æ–¥–Ω–æ–º—É
3. **–ó–∞–ø–∏—Å–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** (–ø–ª–∞–Ω, –≤—Ä–µ–º—è, –æ—à–∏–±–∫–∏)
4. **–û—Ü–µ–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ** –ø–æ –º–µ—Ç—Ä–∏–∫–∞–º

#### –ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:
```python
def test_llm_generation(llm_client, question, expected_plan):
    start_time = time.time()
    
    prompt = f"""
    –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
    - equsers (id, login, email, department)
    - eq_departments (id, departmentname, parentid)
    - tbl_business_unit (id, business_unit_name, inn, phone)
    
    –í–æ–ø—Ä–æ—Å: {question}
    
    –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –ø–ª–∞–Ω –∑–∞–ø—Ä–æ—Å–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON:
    """
    
    response = llm_client.generate(prompt)
    generation_time = time.time() - start_time
    
    return {
        'question': question,
        'generated_plan': response,
        'expected_plan': expected_plan,
        'time': generation_time,
        'accuracy': calculate_accuracy(response, expected_plan)
    }
```

### –≠—Ç–∞–ø 4: –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

#### –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞:

| LLM | –¢–æ—á–Ω–æ—Å—Ç—å | –°–∫–æ—Ä–æ—Å—Ç—å | –ö–∞—á–µ—Å—Ç–≤–æ | –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å | –°—Ç–æ–∏–º–æ—Å—Ç—å |
|-----|----------|----------|----------|--------------|-----------|
| Llama 3.1:8b | ? | ? | ? | ? | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ |
| Llama 3.1:70b | ? | ? | ? | ? | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ |
| GPT-4o | ? | ? | ? | ? | $ |
| GPT-3.5-turbo | ? | ? | ? | ? | $ |

#### –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑:
1. **–õ—É—á—à–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å**: –ö–∞–∫–∞—è –º–æ–¥–µ–ª—å —Ç–æ—á–Ω–µ–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–ª–∞–Ω—ã?
2. **–û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å**: –ö–∞–∫–∞—è –º–æ–¥–µ–ª—å –±—ã—Å—Ç—Ä–µ–µ?
3. **–õ—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ**: –ö–∞–∫–∞—è –º–æ–¥–µ–ª—å –ª—É—á—à–µ –ø–æ–Ω–∏–º–∞–µ—Ç —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã?
4. **–ù–∞–∏–±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–∞—è**: –ö–∞–∫–∞—è –º–æ–¥–µ–ª—å —Ä–µ–∂–µ –æ—à–∏–±–∞–µ—Ç—Å—è?

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–±–æ—Ä–∞

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –¢–æ—á–Ω–æ—Å—Ç—å
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–ª–∞–Ω–æ–≤
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –°–∫–æ—Ä–æ—Å—Ç—å
- –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ < 10 —Å–µ–∫—É–Ω–¥
- –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å > 10 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ > 95%
- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4: –°—Ç–æ–∏–º–æ—Å—Ç—å
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ROI –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ä–µ–¥—É** –¥–ª—è –≤—Å–µ—Ö LLM
2. **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –Ω–∞–±–æ—Ä** –∏–∑ 50 –≤–æ–ø—Ä–æ—Å–æ–≤
3. **–ü—Ä–æ–≤–µ—Å—Ç–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã** —Å –∫–∞–∂–¥–æ–π LLM
4. **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** –∏ –≤—ã–±—Ä–∞—Ç—å –ª—É—á—à—É—é
5. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é LLM** –≤ —Å–∏—Å—Ç–µ–º—É

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ì–∏–ø–æ—Ç–µ–∑—ã:
- **GPT-4o**: –õ—É—á—à–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å, –Ω–æ –¥–æ—Ä–æ–∂–µ
- **Llama 3.1:70b**: –•–æ—Ä–æ—à–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å, –±–µ—Å–ø–ª–∞—Ç–Ω–æ, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ
- **Llama 3.1:8b**: –ë—ã—Å—Ç—Ä–µ–µ, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω–µ–µ —Ç–æ—á–Ω–æ–π
- **GPT-3.5-turbo**: –ö–æ–º–ø—Ä–æ–º–∏—Å—Å –º–µ–∂–¥—É —Ç–æ—á–Ω–æ—Å—Ç—å—é –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å—é

### –ö—Ä–∏—Ç–µ—Ä–∏–π –≤—ã–±–æ—Ä–∞:
**–õ—É—á—à–∞—è LLM = –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –ø—Ä–∏ –ø—Ä–∏–µ–º–ª–µ–º–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ —Å—Ç–æ–∏–º–æ—Å—Ç–∏**

---
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-01-11  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏  
**–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥—ã
