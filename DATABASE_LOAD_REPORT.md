# –û—Ç—á–µ—Ç –æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL DocStructureSchema

## ‚úÖ **–°—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏: –£–°–ü–ï–®–ù–û**

**–î–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏:** $(date)  
**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** `test_docstructure`  
**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** `postgres`  
**–•–æ—Å—Ç:** `localhost:5432`  

## üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**

### **–û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:**
- **–í—Å–µ–≥–æ —Ç–∞–±–ª–∏—Ü:** 200
- **–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:** 9 (–∫–ª—é—á–µ–≤—ã–µ –¥–ª—è NL‚ÜíSQL —Å–∏—Å—Ç–µ–º—ã)

### **–î–∞–Ω–Ω—ã–µ –ø–æ –æ—Å–Ω–æ–≤–Ω—ã–º —Ç–∞–±–ª–∏—Ü–∞–º:**

| –¢–∞–±–ª–∏—Ü–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π |
|---------|------------|-------------------|
| `equsers` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã | 1,124 |
| `eq_departments` | –û—Ç–¥–µ–ª—ã | 8 |
| `tbl_business_unit` | –ü—Ä–æ—Ñ–∏–ª–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ | 502 |
| `eqdoctypes` | –¢–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ | 83 |
| `tbl_principal_assignment` | –ü–æ—Ä—É—á–µ–Ω–∏—è –ø—Ä–∏–Ω—Ü–∏–ø–∞–ª–∞ | 1,959 |
| `tbl_incoming_payments` | –í—Ö–æ–¥—è—â–∏–µ –ø–ª–∞—Ç–µ–∂–∏ | 1,665 |

## üîç **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**

### **‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ä–æ–ª–µ–π:**
- `equsers` - 1,124 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `eq_departments` - 8 –æ—Ç–¥–µ–ª–æ–≤
- `eqgroups` - –≥—Ä—É–ø–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `eqroles` - —Ä–æ–ª–∏ —Å–∏—Å—Ç–µ–º—ã

### **‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç:**
- `eqdoctypes` - 83 —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `eqdocstructure` - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–ª–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `eqview` - –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### **‚úÖ –ë–∏–∑–Ω–µ—Å-–¥–∞–Ω–Ω—ã–µ:**
- `tbl_business_unit` - 502 –ø—Ä–æ—Ñ–∏–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- `tbl_principal_assignment` - 1,959 –ø–æ—Ä—É—á–µ–Ω–∏–π
- `tbl_incoming_payments` - 1,665 –ø–ª–∞—Ç–µ–∂–µ–π

## üë• **–ü—Ä–∏–º–µ—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**

| –õ–æ–≥–∏–Ω | Email | –û—Ç–¥–µ–ª |
|-------|-------|-------|
| a7a_manager | vasilij_kuznecov@yandex.ru | - |
| a7a_head_department | petr_smirnov@mail.ru | - |
| accountant_controller | aleksandr_sidorov@mail.ru | - |
| agent_chief_control | boris_sergeev@mail.ru | - |
| back_office | aleksandr_petrov@yandex.ru | - |

## üìÑ **–ü—Ä–∏–º–µ—Ä—ã —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**

| –¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ | –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –¢–∞–±–ª–∏—Ü–∞ |
|---------------|-----------|---------|
| –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç | tbl_personal_account |
| –£—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ | –£—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ | tbl_accounts_document |
| –°–£–ë–î –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ | –°–£–ë–î | tbl_subd_admin |
| –í—Ö–æ–¥—è—â–∏–µ –ø–ª–∞—Ç–µ–∂–∏ | –í—Ö–æ–¥—è—â–∏–µ –ø–ª–∞—Ç–µ–∂–∏ | tbl_incoming_payments |
| –°–µ–≥–º–µ–Ω—Ç –ø—Ä–æ–¥–∞–∂ | –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ | tbl_sales_segment |

## üéØ **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –¥–ª—è NL‚ÜíSQL —Å–∏—Å—Ç–µ–º—ã**

### **‚úÖ –ß—Ç–æ –≥–æ—Ç–æ–≤–æ:**
- [x] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
- [x] –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã (1,124 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, 502 –∫–ª–∏–µ–Ω—Ç–∞, 1,959 –ø–æ—Ä—É—á–µ–Ω–∏–π)
- [x] –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- [x] –†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç

### **üîß –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞ —Å—Ö–µ–º** - –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ–ª–µ–≤—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π** - –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ NL‚ÜíSQL** - –ø—Ä–æ—Å—Ç—ã–µ –∏ —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Core Platform** - –ø–µ—Ä–µ–¥–∞—á–∞ –ø–ª–∞–Ω–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤

## üìã **–ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö**

### **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**
```bash
PGPASSWORD=1234 psql -h localhost -p 5432 -U postgres -d test_docstructure
```

### **–û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:**
```sql
-- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
\dt

-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö
SELECT 'equsers' as table_name, COUNT(*) as count FROM equsers
UNION ALL
SELECT 'tbl_business_unit', COUNT(*) FROM tbl_business_unit
UNION ALL
SELECT 'tbl_principal_assignment', COUNT(*) FROM tbl_principal_assignment;

-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ –æ—Ç–¥–µ–ª–∞–º
SELECT u.login, u.email, d.departmentname 
FROM equsers u 
LEFT JOIN eq_departments d ON u.department = d.id 
LIMIT 10;

-- –ü–æ—Ä—É—á–µ–Ω–∏—è —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏
SELECT pa.assignment_number, pa.assignment_date, bu.business_unit_name
FROM tbl_principal_assignment pa
JOIN tbl_business_unit bu ON pa.business_unit_id = bu.id
LIMIT 10;
```

## üöÄ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è NL‚ÜíSQL**

### **1. –ö–∞—Ç–∞–ª–æ–≥ —Å—Ö–µ–º**
- –°–æ–∑–¥–∞—Ç—å –æ–ø–∏—Å–∞–Ω–∏—è –≤—Å–µ—Ö 200 —Ç–∞–±–ª–∏—Ü
- –î–æ–±–∞–≤–∏—Ç—å —Å–∏–Ω–æ–Ω–∏–º—ã –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### **2. –†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å**
- –ò–∑—É—á–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏
- –£—á–µ—Å—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—é –æ—Ç–¥–µ–ª–æ–≤

### **3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –ü—Ä–æ—Å—Ç—ã–µ SELECT –∑–∞–ø—Ä–æ—Å—ã
- –°–ª–æ–∂–Ω—ã–µ JOIN –∑–∞–ø—Ä–æ—Å—ã
- –†–æ–ª–µ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –í–∞–ª–∏–¥–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## ‚úÖ **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ**

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö **DocStructureSchema** —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å NL‚ÜíSQL —Å–∏—Å—Ç–µ–º–æ–π. –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç:

- **200 —Ç–∞–±–ª–∏—Ü** –∑–∞–≥—Ä—É–∂–µ–Ω—ã
- **1,124 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** –≤ —Å–∏—Å—Ç–µ–º–µ
- **502 –∫–ª–∏–µ–Ω—Ç–∞** –¥–ª—è –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- **1,959 –ø–æ—Ä—É—á–µ–Ω–∏–π** –∏ **1,665 –ø–ª–∞—Ç–µ–∂–µ–π**
- **83 —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç–∞

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞ —Å—Ö–µ–º –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ NL‚ÜíSQL –ø–æ–º–æ—â–Ω–∏–∫–∞.
