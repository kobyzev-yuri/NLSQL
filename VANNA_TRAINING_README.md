# ü§ñ –ü–∞–π–ø–ª–∞–π–Ω –æ–±—É—á–µ–Ω–∏—è Vanna AI –∞–≥–µ–Ω—Ç–∞

## üìã –û–±–∑–æ—Ä

–ü–∞–π–ø–ª–∞–π–Ω –æ–±—É—á–µ–Ω–∏—è Vanna AI –∞–≥–µ–Ω—Ç–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ SQL –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö DocStructureSchema.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–∞–π–ø–ª–∞–π–Ω–∞

### **–≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö** üìä
- **DDL statements** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏ –ø–æ–ª–µ–π
- **SQL –ø—Ä–∏–º–µ—Ä—ã** - –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏
- **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–∞–±–ª–∏—Ü–∞—Ö –∏ —Å–≤—è–∑—è—Ö

### **–≠—Ç–∞–ø 2: –û–±—É—á–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞** ü§ñ
- –û–±—É—á–µ–Ω–∏–µ –Ω–∞ DDL statements
- –û–±—É—á–µ–Ω–∏–µ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –û–±—É—á–µ–Ω–∏–µ –Ω–∞ SQL –ø—Ä–∏–º–µ—Ä–∞—Ö
- –û–±—É—á–µ–Ω–∏–µ –Ω–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

### **–≠—Ç–∞–ø 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** üß™
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

## üöÄ –ó–∞–ø—É—Å–∫ –ø–∞–π–ø–ª–∞–π–Ω–∞

### **–ü–æ–ª–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω:**
```bash
python train_vanna_agent.py
```

### **–û—Ç–¥–µ–ª—å–Ω—ã–µ —ç—Ç–∞–ø—ã:**
```bash
# –¢–æ–ª—å–∫–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
python train_vanna_agent.py --step prepare

# –¢–æ–ª—å–∫–æ –æ–±—É—á–µ–Ω–∏–µ
python train_vanna_agent.py --step train

# –¢–æ–ª—å–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
python train_vanna_agent.py --step test
```

### **–° –∫–∞—Å—Ç–æ–º–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π:**
```bash
python train_vanna_agent.py --config my_config.json --model ollama/llama3.1:8b
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### **config.json:**
```json
{
  "database_url": "postgresql://postgres:1234@localhost:5432/test_docstructure",
  "vanna_model": "ollama/llama3.1:8b",
  "vector_db": "chromadb",
  "training_data_dir": "training_data",
  "test_questions": [
    "–ü–æ–∫–∞–∂–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",
    "–°–∫–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ?",
    "–ü–æ–∫–∞–∂–∏ –ø–æ—Ä—É—á–µ–Ω–∏—è –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü"
  ]
}
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–±—É—á–µ–Ω–∏—è

```
training_data/
‚îú‚îÄ‚îÄ ddl_statements.sql      # DDL —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î
‚îú‚îÄ‚îÄ documentation.md        # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –ë–î
‚îú‚îÄ‚îÄ sql_examples.json      # –ü—Ä–∏–º–µ—Ä—ã SQL –∑–∞–ø—Ä–æ—Å–æ–≤
‚îî‚îÄ‚îÄ metadata.json          # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü
```

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `vanna` - –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- `ollama` - –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏
- `chromadb` - –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- `psycopg2` - –¥–ª—è PostgreSQL

### **–£—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
pip install -r requirements.txt
```

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Ollama:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Ollama
curl -fsSL https://ollama.ai/install.sh | sh

# –ó–∞–ø—É—Å–∫ –º–æ–¥–µ–ª–∏
ollama pull llama3.1:8b
ollama serve
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ–±—É—á–µ–Ω–∏—è

### **–õ–æ–≥–∏:**
- –í—Å–µ —ç—Ç–∞–ø—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å
- –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è: INFO
- –§–æ—Ä–º–∞—Ç: `timestamp - module - level - message`

### **–û—Ç—á–µ—Ç—ã:**
- –û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏: `test_report.json`
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—É—á–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–ë–∞–∑–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã:**
- "–ü–æ–∫–∞–∂–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"
- "–°–∫–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ?"
- "–ü–æ–∫–∞–∂–∏ –ø–æ—Ä—É—á–µ–Ω–∏—è –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü"

### **–°–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:**
- "–ü–æ–∫–∞–∂–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∏—Ö –æ—Ç–¥–µ–ª–∞–º–∏ –∏ —Ä–æ–ª—è–º–∏"
- "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ—Ä—É—á–µ–Ω–∏—è–º –ø–æ –æ—Ç–¥–µ–ª–∞–º –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü"
- "–¢–æ–ø-10 –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–æ—Ä—É—á–µ–Ω–∏–π"

### **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã
- –ù–µ–ø–æ–Ω—è—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –°–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å –æ—à–∏–±–∫–∞–º–∏

## üîç –û—Ç–ª–∞–¥–∫–∞

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤ –¥–∞–Ω–Ω—ã—Ö
ls -la training_data/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
cat training_data/ddl_statements.sql
cat training_data/documentation.md
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–µ–ª–∏:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Ollama
ollama list
ollama show llama3.1:8b
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ ChromaDB
python -c "import chromadb; print('ChromaDB –¥–æ—Å—Ç—É–ø–µ–Ω')"
```

## üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥–µ–ª–∏:**
- `temperature`: 0.1 (–±–æ–ª–µ–µ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã)
- `max_tokens`: 4000 (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è SQL)
- `top_p`: 0.9 (–±–∞–ª–∞–Ω—Å –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ —Ç–æ—á–Ω–æ—Å—Ç–∏)

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î:**
- `distance_metric`: cosine (–ª—É—á—à–µ –¥–ª—è —Ç–µ–∫—Å—Ç–∞)
- `n_results`: 5 (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### **–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ PostgreSQL
psql -h localhost -U postgres -d test_docstructure -c "SELECT 1;"
```

### **–û—à–∏–±–∫–∞ –º–æ–¥–µ–ª–∏:**
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Ollama
pkill ollama
ollama serve
```

### **–û—à–∏–±–∫–∞ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î:**
```bash
# –û—á–∏—Å—Ç–∫–∞ ChromaDB
rm -rf chroma_db/
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Vanna AI Documentation](https://vanna.ai/docs/)
- [Ollama Documentation](https://ollama.ai/docs)
- [ChromaDB Documentation](https://docs.trychroma.com/)

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
4. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
